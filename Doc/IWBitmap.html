<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<HTML>
<HEAD>
   <TITLE>class  IWBitmap</TITLE>
   <META NAME="GENERATOR" CONTENT="DOC++ 3.4.10">
</HEAD>
<BODY BGCOLOR="#ffffff">

<H2>class  <A HREF="#DOC.DOCU">IWBitmap</A></H2></H2><BLOCKQUOTE>IW44 encoded gray-level image.</BLOCKQUOTE>
<HR>

<H2>Inheritance:</H2>
<APPLET CODE="ClassGraph.class" WIDTH=600 HEIGHT=65>
<param name=classes value="CGPEnabled,MGPEnabled.html,CIWBitmap,MIWBitmap.html">
<param name=before value="M,M">
<param name=after value="Md_,M">
<param name=indent value="0,1">
<param name=arrowdir value="down">
</APPLET>
<HR>

<DL>
<P><DL>
<DT><H3>Public Methods</H3><DD><DT>
<IMG ALT="[more]" BORDER=0 SRC=icon1.gif> <B><A HREF="#DOC.1.4.16.2.1">IWBitmap</A></B>()
<DD><I>Null constructor.</I>
<DT>
<IMG ALT="[more]" BORDER=0 SRC=icon1.gif>void <B><A HREF="#DOC.1.4.16.2.2">init</A></B>(const <!1><A HREF="GBitmap.html">GBitmap</A>* bm, const <!1><A HREF="GBitmap.html">GBitmap</A>* mask=0)
<DD><I>Initializes an IWBitmap with image <TT>bm</TT>.</I>
<DT>
<IMG ALT="[more]" BORDER=0 SRC=icon1.gif> <B><A HREF="#DOC.1.4.16.2.3">IWBitmap</A></B>(const <!1><A HREF="GBitmap.html">GBitmap</A>* bm, const <!1><A HREF="GBitmap.html">GBitmap</A>* mask=0)
<DD><I>Convenience constructor.</I>
<DT>
<IMG ALT="[more]" BORDER=0 SRC=icon1.gif>int <B><A HREF="#DOC.1.4.16.2.4">get_width</A></B>() const 
<DD><I>Returns the width of the IWBitmap image.</I>
<DT>
<IMG ALT="[more]" BORDER=0 SRC=icon1.gif>int <B><A HREF="#DOC.1.4.16.2.5">get_height</A></B>() const 
<DD><I>Returns the height of the IWBitmap image.</I>
<DT>
<IMG ALT="[more]" BORDER=0 SRC=icon1.gif><!1><A HREF="GP.html">GP</A>&lt;<!1><A HREF="GBitmap.html">GBitmap</A>&gt;  <B><A HREF="#DOC.1.4.16.2.6">get_bitmap</A></B>()
<DD><I>Reconstructs the complete image.</I>
<DT>
<IMG ALT="[more]" BORDER=0 SRC=icon1.gif><!1><A HREF="GP.html">GP</A>&lt;<!1><A HREF="GBitmap.html">GBitmap</A>&gt;  <B><A HREF="#DOC.1.4.16.2.7">get_bitmap</A></B>(int subsample, const <!1><A HREF="GRect.html">GRect</A> &amp;rect)
<DD><I>Reconstructs a segment of the image at a given scale.</I>
<DT>
<IMG ALT="[more]" BORDER=0 SRC=icon1.gif>unsigned int <B><A HREF="#DOC.1.4.16.2.8">get_memory_usage</A></B>() const 
<DD><I>Returns the amount of memory used by the wavelet coefficients.</I>
<DT>
<IMG ALT="[more]" BORDER=0 SRC=icon1.gif>int <B><A HREF="#DOC.1.4.16.2.9">get_percent_memory</A></B>() const 
<DD><I>Returns the filling ratio of the internal data structure.</I>
<DT>
<IMG ALT="[more]" BORDER=0 SRC=icon1.gif>int <B><A HREF="#DOC.1.4.16.2.10">encode_chunk</A></B>(<!1><A HREF="ByteStream.html">ByteStream</A> &amp;bs, const <!1><A HREF="IWEncoderParms.html">IWEncoderParms</A> &amp;parms)
<DD><I>Encodes one data chunk into ByteStream <TT>bs</TT>.</I>
<DT>
<IMG ALT="[more]" BORDER=0 SRC=icon1.gif>void <B><A HREF="#DOC.1.4.16.2.11">encode_iff</A></B>(<!1><A HREF="IFFByteStream.html">IFFByteStream</A> &amp;iff, int nchunks, const <!1><A HREF="IWEncoderParms.html">IWEncoderParms</A>* parms)
<DD><I>Writes a gray level image into DjVu IW44 file.</I>
<DT>
<IMG ALT="[more]" BORDER=0 SRC=icon1.gif>int <B><A HREF="#DOC.1.4.16.2.12">decode_chunk</A></B>(<!1><A HREF="ByteStream.html">ByteStream</A> &amp;bs)
<DD><I>Decodes one data chunk from ByteStream <TT>bs</TT>.</I>
<DT>
<IMG ALT="[more]" BORDER=0 SRC=icon1.gif>void <B><A HREF="#DOC.1.4.16.2.13">decode_iff</A></B>(<!1><A HREF="IFFByteStream.html">IFFByteStream</A> &amp;iff, int maxchunks=999)
<DD><I>Reads a DjVu IW44 file as a gray level image.</I>
<DT>
<IMG ALT="[more]" BORDER=0 SRC=icon1.gif>void <B><A HREF="#DOC.1.4.16.2.14">close_codec</A></B>()
<DD><I>Resets the encoder/decoder state.</I>
<DT>
<IMG ALT="[more]" BORDER=0 SRC=icon1.gif>int <B><A HREF="#DOC.1.4.16.2.15">get_serial</A></B>()
<DD><I>Returns the chunk serial number.</I>
<DT>
<IMG ALT="[more]" BORDER=0 SRC=icon1.gif>void <B><A HREF="#DOC.1.4.16.2.16">parm_dbfrac</A></B>(float frac)
<DD><I>Sets the <TT>dbfrac</TT> parameter.</I>
</DL></P>

</DL>
<HR><H3>Inherited from <A HREF="GPEnabled.html">GPEnabled</A>:</H3>
<DL>
<P><DL>
<DT><H3>Public Methods</H3><DD><DT>
<IMG ALT="o" SRC=icon2.gif><!1><A HREF="GPEnabled.html">GPEnabled</A>&amp; <B>operator=</B>(const <!1><A HREF="GPEnabled.html">GPEnabled</A> &amp; obj)
</DL></P>

<P><DL>
<DT><H3>Protected Fields</H3><DD><DT>
<IMG ALT="o" SRC=icon2.gif>volatile   int <B>count</B>
</DL></P>

<P><DL>
<DT><H3>Protected Methods</H3><DD><DT>
<IMG ALT="o" SRC=icon2.gif>virtual   void <B>destroy</B>()
</DL></P>

</DL>

<A NAME="DOC.DOCU"></A>
<HR>
<H2>Documentation</H2>
<BLOCKQUOTE>IW44 encoded gray-level image.  This class provided functions for managing
a gray level image represented as a collection of IW44 wavelet
coefficients.  The coefficients are stored in a memory efficient data
structure.  Member function <!1><A HREF="IWBitmap.html#DOC.1.4.16.2.6">get_bitmap</A> renders an arbitrary segment
of the image into a <!1><A HREF="GBitmap.html">GBitmap</A>.  Member functions <!1><A HREF="IWBitmap.html#DOC.1.4.16.2.13">decode_iff</A> and
<!1><A HREF="IWBitmap.html#DOC.1.4.16.2.11">encode_iff</A> read and write DjVu IW44 files (see <!1><A HREF="IWImage.h.html">IWImage.h</A>).
Both the copy constructor and the copy operator are declared as private
members. It is therefore not possible to make multiple copies of instances
of this class. </BLOCKQUOTE>
<DL>

<A NAME="IWBitmap"></A>
<A NAME="DOC.1.4.16.2.1"></A>
<DT><IMG ALT="o" BORDER=0 SRC=icon2.gif><TT><B> IWBitmap()</B></TT>
<DD>Null constructor.  Constructs an empty IWBitmap object. This object does
not contain anything meaningful. You must call function <!1><A HREF="IWBitmap.html#DOC.1.4.16.2.2">init</A>,
<!1><A HREF="IWBitmap.html#DOC.1.4.16.2.13">decode_iff</A> or <!1><A HREF="IWBitmap.html#DOC.1.4.16.2.12">decode_chunk</A> to populate the wavelet
coefficient data structure. 
<DL><DT><DD></DL><P>
<A NAME="init"></A>
<A NAME="DOC.1.4.16.2.2"></A>
<DT><IMG ALT="o" BORDER=0 SRC=icon2.gif><TT><B>void init(const <!1><A HREF="GBitmap.html">GBitmap</A>* bm, const <!1><A HREF="GBitmap.html">GBitmap</A>* mask=0)</B></TT>
<DD>Initializes an IWBitmap with image <TT>bm</TT>.  This constructor
performs the wavelet decomposition of image <TT>bm</TT> and records the
corresponding wavelet coefficient.  Argument <TT>mask</TT> is an optional
bilevel image specifying the masked pixels (see <!1><A HREF="IWImage.h.html">IWImage.h</A>). 
<DL><DT><DD></DL><P>
<A NAME="IWBitmap"></A>
<A NAME="DOC.1.4.16.2.3"></A>
<DT><IMG ALT="o" BORDER=0 SRC=icon2.gif><TT><B> IWBitmap(const <!1><A HREF="GBitmap.html">GBitmap</A>* bm, const <!1><A HREF="GBitmap.html">GBitmap</A>* mask=0)</B></TT>
<DD>Convenience constructor. This constructors creates an empty IWBitmap
and then calls function <!1><A HREF="IWBitmap.html#DOC.1.4.16.2.2">init</A> above. 
<DL><DT><DD></DL><P>
<A NAME="get_width"></A>
<A NAME="DOC.1.4.16.2.4"></A>
<DT><IMG ALT="o" BORDER=0 SRC=icon2.gif><TT><B>int get_width() const </B></TT>
<DD>Returns the width of the IWBitmap image. 
<DL><DT><DD></DL><P>
<A NAME="get_height"></A>
<A NAME="DOC.1.4.16.2.5"></A>
<DT><IMG ALT="o" BORDER=0 SRC=icon2.gif><TT><B>int get_height() const </B></TT>
<DD>Returns the height of the IWBitmap image. 
<DL><DT><DD></DL><P>
<A NAME="get_bitmap"></A>
<A NAME="DOC.1.4.16.2.6"></A>
<DT><IMG ALT="o" BORDER=0 SRC=icon2.gif><TT><B><!1><A HREF="GP.html">GP</A>&lt;<!1><A HREF="GBitmap.html">GBitmap</A>&gt;  get_bitmap()</B></TT>
<DD>Reconstructs the complete image.  The reconstructed image
is then returned as a GBitmap object. 
<DL><DT><DD></DL><P>
<A NAME="get_bitmap"></A>
<A NAME="DOC.1.4.16.2.7"></A>
<DT><IMG ALT="o" BORDER=0 SRC=icon2.gif><TT><B><!1><A HREF="GP.html">GP</A>&lt;<!1><A HREF="GBitmap.html">GBitmap</A>&gt;  get_bitmap(int subsample, const <!1><A HREF="GRect.html">GRect</A> &amp;rect)</B></TT>
<DD>Reconstructs a segment of the image at a given scale.  The subsampling
ratio <TT>subsample</TT> must be a power of two between <TT>1</TT> and <TT>32</TT>.  Argument
<TT>rect</TT> specifies which segment of the subsampled image should be
reconstructed.  The reconstructed image is returned as a GBitmap object
whose size is equal to the size of the rectangle <TT>rect</TT>. 
<DL><DT><DD></DL><P>
<A NAME="get_memory_usage"></A>
<A NAME="DOC.1.4.16.2.8"></A>
<DT><IMG ALT="o" BORDER=0 SRC=icon2.gif><TT><B>unsigned int get_memory_usage() const </B></TT>
<DD>Returns the amount of memory used by the wavelet coefficients.  This
amount of memory is expressed in bytes. 
<DL><DT><DD></DL><P>
<A NAME="get_percent_memory"></A>
<A NAME="DOC.1.4.16.2.9"></A>
<DT><IMG ALT="o" BORDER=0 SRC=icon2.gif><TT><B>int get_percent_memory() const </B></TT>
<DD>Returns the filling ratio of the internal data structure.  Wavelet
coefficients are stored in a sparse array.  This function tells what
percentage of bins have been effectively allocated. 
<DL><DT><DD></DL><P>
<A NAME="encode_chunk"></A>
<A NAME="DOC.1.4.16.2.10"></A>
<DT><IMG ALT="o" BORDER=0 SRC=icon2.gif><TT><B>int encode_chunk(<!1><A HREF="ByteStream.html">ByteStream</A> &amp;bs, const <!1><A HREF="IWEncoderParms.html">IWEncoderParms</A> &amp;parms)</B></TT>
<DD>Encodes one data chunk into ByteStream <TT>bs</TT>.  Parameter <TT>parms</TT> controls
how much data is generated.  The chunk data is written to ByteStream
<TT>bs</TT> with no IFF header.  Successive calls to <TT>encode_chunk</TT> encode
successive chunks.  You must call <TT>close_codec</TT> after encoding the last
chunk of a file. 
<DL><DT><DD></DL><P>
<A NAME="encode_iff"></A>
<A NAME="DOC.1.4.16.2.11"></A>
<DT><IMG ALT="o" BORDER=0 SRC=icon2.gif><TT><B>void encode_iff(<!1><A HREF="IFFByteStream.html">IFFByteStream</A> &amp;iff, int nchunks, const <!1><A HREF="IWEncoderParms.html">IWEncoderParms</A>* parms)</B></TT>
<DD>Writes a gray level image into DjVu IW44 file.  This function creates a
composite chunk (identifier <TT>FORM:BM44</TT>) composed of <TT>nchunks</TT> chunks
(identifier <TT>BM44</TT>).  Data for each chunk is generated with
<TT>encode_chunk</TT> using the corresponding parameters in array <TT>parms</TT>. 
<DL><DT><DD></DL><P>
<A NAME="decode_chunk"></A>
<A NAME="DOC.1.4.16.2.12"></A>
<DT><IMG ALT="o" BORDER=0 SRC=icon2.gif><TT><B>int decode_chunk(<!1><A HREF="ByteStream.html">ByteStream</A> &amp;bs)</B></TT>
<DD>Decodes one data chunk from ByteStream <TT>bs</TT>.  Successive calls to
<TT>decode_chunk</TT> decode successive chunks.  You must call <TT>close_codec</TT>
after decoding the last chunk of a file.  Note that function
<TT>get_bitmap</TT> and <TT>decode_chunk</TT> may be called simultaneously from two
execution threads. 
<DL><DT><DD></DL><P>
<A NAME="decode_iff"></A>
<A NAME="DOC.1.4.16.2.13"></A>
<DT><IMG ALT="o" BORDER=0 SRC=icon2.gif><TT><B>void decode_iff(<!1><A HREF="IFFByteStream.html">IFFByteStream</A> &amp;iff, int maxchunks=999)</B></TT>
<DD>Reads a DjVu IW44 file as a gray level image.  This function enters a
composite chunk (identifier <TT>FORM:BM44</TT>), and decodes a maximum of
<TT>maxchunks</TT> data chunks (identifier <TT>BM44</TT>).  Data for each chunk is
processed using the function <TT>decode_chunk</TT>. 
<DL><DT><DD></DL><P>
<A NAME="close_codec"></A>
<A NAME="DOC.1.4.16.2.14"></A>
<DT><IMG ALT="o" BORDER=0 SRC=icon2.gif><TT><B>void close_codec()</B></TT>
<DD>Resets the encoder/decoder state.  The first call to <TT>decode_chunk</TT> or
<TT>encode_chunk</TT> initializes the coder for encoding or decoding.  Function
<TT>close_codec</TT> must be called after processing the last chunk in order to
reset the coder and release the associated memory. 
<DL><DT><DD></DL><P>
<A NAME="get_serial"></A>
<A NAME="DOC.1.4.16.2.15"></A>
<DT><IMG ALT="o" BORDER=0 SRC=icon2.gif><TT><B>int get_serial()</B></TT>
<DD>Returns the chunk serial number.  This function returns the serial
number of the last chunk encoded with <TT>encode_chunk</TT> or decoded with
<TT>decode_chunk</TT>. The first chunk always has serial number <TT>1</TT>. Successive
chunks have increasing serial numbers.  Value <TT>0</TT> is returned if this
function is called before calling <TT>encode_chunk</TT> or <TT>decode_chunk</TT> or
after calling <TT>close_codec</TT>. 
<DL><DT><DD></DL><P>
<A NAME="parm_dbfrac"></A>
<A NAME="DOC.1.4.16.2.16"></A>
<DT><IMG ALT="o" BORDER=0 SRC=icon2.gif><TT><B>void parm_dbfrac(float frac)</B></TT>
<DD>Sets the <TT>dbfrac</TT> parameter.  This function can be called before
encoding the first IW44 data chunk.  Parameter <TT>frac</TT> modifies the
decibel estimation algorithm in such a way that the decibel target only
pertains to the average error of the fraction <TT>frac</TT> of the most
misrepresented 32x32 pixel blocks.  Setting arguments <TT>frac</TT> to <TT>1.0</TT>
restores the normal behavior.  
<DL><DT><DD></DL><P></DL>

<HR><DL><DT><B>This class has no child classes.</B></DL>

<DL><DT><DD></DL><P><P><I><A HREF="index.html">Alphabetic index</A></I> <I><A HREF="HIER.html">HTML hierarchy of classes</A> or <A HREF="HIERjava.html">Java</A></I></P><HR>
<!-- This is were the DOC++ footer is defined  -->
