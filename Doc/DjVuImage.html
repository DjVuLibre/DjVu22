<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<HTML>
<HEAD>
   <TITLE>class  DjVuImage</TITLE>
   <META NAME="GENERATOR" CONTENT="DOC++ 3.4.10">
</HEAD>
<BODY BGCOLOR="#ffffff">

<H2>class  <A HREF="#DOC.DOCU">DjVuImage</A></H2></H2><BLOCKQUOTE>Main DjVu Image data structure.</BLOCKQUOTE>
<HR>

<H2>Inheritance:</H2>
<APPLET CODE="ClassGraph.class" WIDTH=600 HEIGHT=65>
<param name=classes value="CGPEnabled,MGPEnabled.html,CDjVuImage,MDjVuImage.html">
<param name=before value="M,M">
<param name=after value="Md_,M">
<param name=indent value="0,1">
<param name=arrowdir value="down">
</APPLET>
<HR>

<DL>
<P><DL>
<DT><H3>Public Methods</H3><DD><DT>
<IMG ALT="[more]" BORDER=0 SRC=icon1.gif> <B><A HREF="#DOC.1.4.18.5.1">Construction. </A></B>
<DT>
<IMG ALT="[more]" BORDER=0 SRC=icon1.gif> <B><A HREF="#DOC.1.4.18.5.2">Components. </A></B>
<DT>
<IMG ALT="[more]" BORDER=0 SRC=icon1.gif> <B><A HREF="#DOC.1.4.18.5.3">Utilities </A></B>
<DT>
<IMG ALT="[more]" BORDER=0 SRC=icon1.gif> <B><A HREF="#DOC.1.4.18.5.4">Decoding. </A></B>
<DT>
<IMG ALT="[more]" BORDER=0 SRC=icon1.gif> <B><A HREF="#DOC.1.4.18.5.5">Checking for legal DjVu files. </A></B>
<DT>
<IMG ALT="[more]" BORDER=0 SRC=icon1.gif> <B><A HREF="#DOC.1.4.18.5.6">Rendering.  </A></B>
</DL></P>

</DL>
<HR><H3>Inherited from <A HREF="GPEnabled.html">GPEnabled</A>:</H3>
<DL>
<P><DL>
<DT><H3>Public Methods</H3><DD><DT>
<IMG ALT="o" SRC=icon2.gif><!1><A HREF="GPEnabled.html">GPEnabled</A>&amp; <B>operator=</B>(const <!1><A HREF="GPEnabled.html">GPEnabled</A> &amp; obj)
</DL></P>

<P><DL>
<DT><H3>Protected Fields</H3><DD><DT>
<IMG ALT="o" SRC=icon2.gif>volatile   int <B>count</B>
</DL></P>

<P><DL>
<DT><H3>Protected Methods</H3><DD><DT>
<IMG ALT="o" SRC=icon2.gif>virtual   void <B>destroy</B>()
</DL></P>

</DL>

<A NAME="DOC.DOCU"></A>
<HR>
<H2>Documentation</H2>
<BLOCKQUOTE>Main DjVu Image data structure.  This class defines the internal
representation of a DjVu image.  This representation consists of a few
pointers referencing the various components of the DjVu image.  These
components are created and populated by the decoding function.  The
rendering functions then can use the available components to compute a
pixel representation of the desired segment of the DjVu image. </BLOCKQUOTE>
<DL>

<A NAME="Construction. "></A>
<A NAME="DOC.1.4.18.5.1"></A>
<DT><IMG ALT="o" BORDER=0 SRC=icon2.gif><TT><B> Construction. </B></TT>
<DL><DT><DD></DL><P><DL>

<A NAME="DjVuImage"></A>
<A NAME="DOC.1.4.18.5.1.1"></A>
<DT><IMG ALT="o" BORDER=0 SRC=icon2.gif><TT><B> DjVuImage()</B></TT>
<DD>Constructs an empty DjVu image.  
Function <TT>decode</TT> must then be called to
populate this DjVu image object. 
<DL><DT><DD></DL><P>
<A NAME="init"></A>
<A NAME="DOC.1.4.18.5.1.2"></A>
<DT><IMG ALT="o" BORDER=0 SRC=icon2.gif><TT><B>void init()</B></TT>
<DD>Resets a DjVu image and release all memory. 
Function <TT>decode</TT> must then be called to
populate this DjVu image object. 
<DL><DT><DD></DL><P></DL>

<A NAME="Components. "></A>
<A NAME="DOC.1.4.18.5.2"></A>
<DT><IMG ALT="o" BORDER=0 SRC=icon2.gif><TT><B> Components. </B></TT>
<DL><DT><DD></DL><P><DL>

<A NAME="get_info"></A>
<A NAME="DOC.1.4.18.5.2.1"></A>
<DT><IMG ALT="o" BORDER=0 SRC=icon2.gif><TT><B><!1><A HREF="GP.html">GP</A>&lt;<!1><A HREF="DjVuInfo.html">DjVuInfo</A>&gt;  get_info() const </B></TT>
<DD>Returns a pointer to a DjVu information component.
This function returns a null pointer until the decoder
actually processes an <TT>&quot;INFO&quot;</TT> chunk. 
<DL><DT><DD></DL><P>
<A NAME="get_anno"></A>
<A NAME="DOC.1.4.18.5.2.2"></A>
<DT><IMG ALT="o" BORDER=0 SRC=icon2.gif><TT><B><!1><A HREF="GP.html">GP</A>&lt;<!1><A HREF="DjVuAnno.html">DjVuAnno</A>&gt;  get_anno() const </B></TT>
<DD>Returns a pointer to a DjVu display annotation component.
This function returns a null pointer until the decoder
actually processes an <TT>&quot;ANTa&quot;</TT> chunk. 
<DL><DT><DD></DL><P>
<A NAME="get_bg44"></A>
<A NAME="DOC.1.4.18.5.2.3"></A>
<DT><IMG ALT="o" BORDER=0 SRC=icon2.gif><TT><B><!1><A HREF="GP.html">GP</A>&lt;<!1><A HREF="IWPixmap.html">IWPixmap</A>&gt;  get_bg44() const </B></TT>
<DD>Returns a pointer to the background component of a DjVu image. The
background component is always an IW44 image in this
implementation. This function returns a null pointer until the decoder
actually processes an <TT>&quot;BG44&quot;</TT> chunk. 
<DL><DT><DD></DL><P>
<A NAME="get_fgjb"></A>
<A NAME="DOC.1.4.18.5.2.4"></A>
<DT><IMG ALT="o" BORDER=0 SRC=icon2.gif><TT><B><!1><A HREF="GP.html">GP</A>&lt;<!1><A HREF="JB2Image.html">JB2Image</A>&gt;  get_fgjb() const </B></TT>
<DD>Returns a pointer to the mask of the foreground component of a DjVu
image. The mask of the foreground component is always a JB2 image in
this implementation. This function returns a null pointer until the
decoder actually processes an <TT>&quot;Sjbz&quot;</TT> chunk. 
<DL><DT><DD></DL><P>
<A NAME="get_fgpm"></A>
<A NAME="DOC.1.4.18.5.2.5"></A>
<DT><IMG ALT="o" BORDER=0 SRC=icon2.gif><TT><B><!1><A HREF="GP.html">GP</A>&lt;<!1><A HREF="GPixmap.html">GPixmap</A>&gt;  get_fgpm() const </B></TT>
<DD>Returns a pointer to the colors of the foreground component of a DjVu
image. The mask of the foreground component is always a small pixmap in
this implementation. This function returns a null pointer until the
decoder actually processes an <TT>&quot;FG44&quot;</TT> chunk. 
<DL><DT><DD></DL><P></DL>

<A NAME="Utilities "></A>
<A NAME="DOC.1.4.18.5.3"></A>
<DT><IMG ALT="o" BORDER=0 SRC=icon2.gif><TT><B> Utilities </B></TT>
<DL><DT><DD></DL><P><DL>

<A NAME="get_width"></A>
<A NAME="DOC.1.4.18.5.3.1"></A>
<DT><IMG ALT="o" BORDER=0 SRC=icon2.gif><TT><B>int get_width() const </B></TT>
<DD>Returns the width of the DjVu image. This function just extracts this
information from the DjVu information component. It returns zero if such
a component is not yet available. 
<DL><DT><DD></DL><P>
<A NAME="get_height"></A>
<A NAME="DOC.1.4.18.5.3.2"></A>
<DT><IMG ALT="o" BORDER=0 SRC=icon2.gif><TT><B>int get_height() const </B></TT>
<DD>Returns the height of the DjVu image. This function just extracts this
information from the DjVu information component. It returns zero if such
a component is not yet available. 
<DL><DT><DD></DL><P>
<A NAME="get_version"></A>
<A NAME="DOC.1.4.18.5.3.3"></A>
<DT><IMG ALT="o" BORDER=0 SRC=icon2.gif><TT><B>int get_version() const </B></TT>
<DD>Returns the format version the DjVu data. This function just extracts
this information from the DjVu information component. It returns zero if
such a component is not yet available.  This version number should
be compared with the <!1><A HREF="DjVuversionconstants.html">DjVu version constants</A>. 
<DL><DT><DD></DL><P>
<A NAME="get_dpi"></A>
<A NAME="DOC.1.4.18.5.3.4"></A>
<DT><IMG ALT="o" BORDER=0 SRC=icon2.gif><TT><B>int get_dpi() const </B></TT>
<DD>Returns the resolution of the DjVu image. This information is given in
pixels per 2.54 cm.  Display programs can use this information to
determine the natural magnification to use for rendering a DjVu
image. 
<DL><DT><DD></DL><P>
<A NAME="get_gamma"></A>
<A NAME="DOC.1.4.18.5.3.5"></A>
<DT><IMG ALT="o" BORDER=0 SRC=icon2.gif><TT><B>double get_gamma() const </B></TT>
<DD>Returns the gamma coefficient of the display for which the image was
designed.  The rendering functions can use this information in order to
perform color correction for the intended display device. 
<DL><DT><DD></DL><P>
<A NAME="get_mimetype"></A>
<A NAME="DOC.1.4.18.5.3.6"></A>
<DT><IMG ALT="o" BORDER=0 SRC=icon2.gif><TT><B><!1><A HREF="GString.html">GString</A> get_mimetype() const </B></TT>
<DD>Returns a MIME type string describing the DjVu data.  This information
is auto-sensed by the decoder.  The MIME type can be <TT>&quot;image/djvu&quot;</TT> or
<TT>&quot;image/iw44&quot;</TT> depending on the data stream. 
<DL><DT><DD></DL><P>
<A NAME="get_memory_usage"></A>
<A NAME="DOC.1.4.18.5.3.7"></A>
<DT><IMG ALT="o" BORDER=0 SRC=icon2.gif><TT><B>unsigned int get_memory_usage() const </B></TT>
<DD>Returns the memory required to store this image.  This number includes
the memory required by all the components of the DjVu image. 
<DL><DT><DD></DL><P>
<A NAME="get_short_description"></A>
<A NAME="DOC.1.4.18.5.3.8"></A>
<DT><IMG ALT="o" BORDER=0 SRC=icon2.gif><TT><B><!1><A HREF="GString.html">GString</A> get_short_description() const </B></TT>
<DD>Returns a short string describing the DjVu image.
Example: <TT>&quot;2500x3223&nbsp;in&nbsp;23.1&nbsp;Kb&quot;</TT>. 
<DL><DT><DD></DL><P>
<A NAME="get_long_description"></A>
<A NAME="DOC.1.4.18.5.3.9"></A>
<DT><IMG ALT="o" BORDER=0 SRC=icon2.gif><TT><B><!1><A HREF="GString.html">GString</A> get_long_description() const </B></TT>
<DD>Returns a verbose description of the DjVu image.  This description lists
all the chunks with their size and a brief comment, as shown in the
following example.
<PRE>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DJVU&nbsp;Image&nbsp;(2325x3156)&nbsp;version&nbsp;17:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.0&nbsp;Kb&nbsp;&nbsp;&nbsp;'INFO'&nbsp;&nbsp;Page&nbsp;information.
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;17.3&nbsp;Kb&nbsp;&nbsp;'Sjbz'&nbsp;&nbsp;JB2&nbsp;foreground&nbsp;mask&nbsp;(2325x3156)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2.5&nbsp;Kb&nbsp;&nbsp;&nbsp;'BG44'&nbsp;&nbsp;IW44&nbsp;background&nbsp;(775x1052)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1.0&nbsp;Kb&nbsp;&nbsp;&nbsp;'FG44'&nbsp;&nbsp;IW44&nbsp;foreground&nbsp;colors&nbsp;(194x263)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3.0&nbsp;Kb&nbsp;&nbsp;&nbsp;'BG44'&nbsp;&nbsp;IW44&nbsp;background&nbsp;(part&nbsp;2).
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.9&nbsp;Kb&nbsp;&nbsp;&nbsp;'BG44'&nbsp;&nbsp;IW44&nbsp;background&nbsp;(part&nbsp;3).
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7.1&nbsp;Kb&nbsp;&nbsp;&nbsp;'BG44'&nbsp;&nbsp;IW44&nbsp;background&nbsp;(part&nbsp;4).
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Compression&nbsp;ratio:&nbsp;676&nbsp;(31.8&nbsp;Kb)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</PRE> 
<DL><DT><DD></DL><P></DL>

<A NAME="Decoding. "></A>
<A NAME="DOC.1.4.18.5.4"></A>
<DT><IMG ALT="o" BORDER=0 SRC=icon2.gif><TT><B> Decoding. </B></TT>
<DL><DT><DD></DL><P><DL>

<A NAME="decode"></A>
<A NAME="DOC.1.4.18.5.4.1"></A>
<DT><IMG ALT="o" BORDER=0 SRC=icon2.gif><TT><B>void decode(<!1><A HREF="ByteStream.html">ByteStream</A> &amp;bs, <!1><A HREF="DjVuInterface.html">DjVuInterface</A>* notifier=0)</B></TT>
<DD>Decodes DjVu data. This function reads binary data from the ByteStream
<TT>bs</TT> and populates this DjVu image.  The decoder can process both IW44
Image files and DjVu Image files.  IW44 Image files are in fact handled
like Photo DjVu Images.  The member functions of the optional argument
<TT>notifier</TT> are called at appropriate times during the decoding process.
See class <!1><A HREF="DjVuInterface.html">DjVuInterface</A> for more details. 
<DL><DT><DD></DL><P></DL>

<A NAME="Checking for legal DjVu files. "></A>
<A NAME="DOC.1.4.18.5.5"></A>
<DT><IMG ALT="o" BORDER=0 SRC=icon2.gif><TT><B> Checking for legal DjVu files. </B></TT>
<DL><DT><DD></DL><P><DL>

<A NAME="is_legal_photo"></A>
<A NAME="DOC.1.4.18.5.5.1"></A>
<DT><IMG ALT="o" BORDER=0 SRC=icon2.gif><TT><B>int is_legal_photo() const </B></TT>
<DD>This function returns true if this object contains a well formed <EM>
Photo DjVu Image</EM>. Calling function <TT>get_pixmap</TT> on a well formed photo
image should always return a non zero value.  Note that function
<TT>get_pixmap</TT> works as soon as sufficient information is present,
regardless of the fact that the image follows the rules or not. 
<DL><DT><DD></DL><P>
<A NAME="is_legal_bilevel"></A>
<A NAME="DOC.1.4.18.5.5.2"></A>
<DT><IMG ALT="o" BORDER=0 SRC=icon2.gif><TT><B>int is_legal_bilevel() const </B></TT>
<DD>This function returns true if this object contains a well formed <EM>
Bilevel DjVu Image</EM>.  Calling function <TT>get_bitmap</TT> on a well formed
bilevel image should always return a non zero value.  Note that function
<TT>get_bitmap</TT> works as soon as a foreground mask component is present,
regardless of the fact that the image follows the rules or not. 
<DL><DT><DD></DL><P>
<A NAME="is_legal_compound"></A>
<A NAME="DOC.1.4.18.5.5.3"></A>
<DT><IMG ALT="o" BORDER=0 SRC=icon2.gif><TT><B>int is_legal_compound() const </B></TT>
<DD>This function returns true if this object contains a well formed <EM>
Compound DjVu Image</EM>.  Calling function <TT>get_bitmap</TT> or <TT>get_pixmap</TT> on
a well formed compound DjVu image should always return a non zero value.
Note that functions <TT>get_bitmap</TT> or <TT>get_pixmap</TT> works as soon as
sufficient information is present, regardless of the fact that the image
follows the rules or not.  
<DL><DT><DD></DL><P></DL>

<A NAME="Rendering.  "></A>
<A NAME="DOC.1.4.18.5.6"></A>
<DT><IMG ALT="o" BORDER=0 SRC=icon2.gif><TT><B> Rendering.  </B></TT>
<DD>All these functions take two rectangles as argument.  Conceptually,
these function first render the whole image into a rectangular area
defined by rectangle <TT>all</TT>.  The relation between this rectangle and the
image size define the appropriate scaling.  The rendering function then
extract the subrectangle <TT>rect</TT> and return the corresponding pixels as a
<TT>GPixmap</TT> or <TT>GBitmap</TT> object.  The actual implementation performs these
two operation simultaneously for obvious efficiency reasons.  The best
rendering speed is achieved by making sure that the size of rectangle
<TT>all</TT> and the size of the DjVu image are related by an integer ratio. 
<DL><DT><DD></DL><P><DL>

<A NAME="get_pixmap"></A>
<A NAME="DOC.1.4.18.5.6.1"></A>
<DT><IMG ALT="o" BORDER=0 SRC=icon2.gif><TT><B><!1><A HREF="GP.html">GP</A>&lt;<!1><A HREF="GPixmap.html">GPixmap</A>&gt;  get_pixmap(const <!1><A HREF="GRect.html">GRect</A> &amp;rect, const <!1><A HREF="GRect.html">GRect</A> &amp;all, double <!1><A HREF="DjVuInfo.html#DOC.1.4.18.2.9">gamma</A>=0) const </B></TT>
<DD>Renders the image and returns a color pixel image.  Rectangles <TT>rect</TT>
and <TT>all</TT> are used as explained above. Color correction is performed
according to argument <TT>gamma</TT>, which represents the gamma coefficient of
the display device on which the pixmap will be rendered.  The default
value, zero, means that no color correction should be performed. 
This function returns a null pointer if there is not enough information
in the DjVu image to properly render the desired image. 
<DL><DT><DD></DL><P>
<A NAME="get_bitmap"></A>
<A NAME="DOC.1.4.18.5.6.2"></A>
<DT><IMG ALT="o" BORDER=0 SRC=icon2.gif><TT><B><!1><A HREF="GP.html">GP</A>&lt;<!1><A HREF="GBitmap.html">GBitmap</A>&gt;  get_bitmap(const <!1><A HREF="GRect.html">GRect</A> &amp;rect, const <!1><A HREF="GRect.html">GRect</A> &amp;all, int align = 1) const </B></TT>
<DD>Renders the mask of the foreground layer of the DjVu image.  This
functions is a wrapper for JB2Image::get_bitmap.  Argument <TT>align</TT>
specified the alignment of the rows of the returned images.  Setting
<TT>align</TT> to <TT>4</TT>, for instance, will adjust the bitmap border in order to
make sure that each row of the returned image starts on a word (four
byte) boundary.  This function returns a null pointer if there is not
enough information in the DjVu image to properly render the desired
image. 
<DL><DT><DD></DL><P>
<A NAME="get_bg_pixmap"></A>
<A NAME="DOC.1.4.18.5.6.3"></A>
<DT><IMG ALT="o" BORDER=0 SRC=icon2.gif><TT><B><!1><A HREF="GP.html">GP</A>&lt;<!1><A HREF="GPixmap.html">GPixmap</A>&gt;  get_bg_pixmap(const <!1><A HREF="GRect.html">GRect</A> &amp;rect, const <!1><A HREF="GRect.html">GRect</A> &amp;all, double <!1><A HREF="DjVuInfo.html#DOC.1.4.18.2.9">gamma</A>=0) const </B></TT>
<DD>Renders the background layer of the DjVu image.  Rectangles <TT>rect</TT> and
<TT>all</TT> are used as explained above. Color correction is performed
according to argument <TT>gamma</TT>, which represents the gamma coefficient of
the display device on which the pixmap will be rendered.  The default
value, zero, means that no color correction should be performed.  This
function returns a null pointer if there is not enough information in
the DjVu image to properly render the desired image. 
<DL><DT><DD></DL><P>
<A NAME="get_fg_pixmap"></A>
<A NAME="DOC.1.4.18.5.6.4"></A>
<DT><IMG ALT="o" BORDER=0 SRC=icon2.gif><TT><B><!1><A HREF="GP.html">GP</A>&lt;<!1><A HREF="GPixmap.html">GPixmap</A>&gt;  get_fg_pixmap(const <!1><A HREF="GRect.html">GRect</A> &amp;rect, const <!1><A HREF="GRect.html">GRect</A> &amp;all, double <!1><A HREF="DjVuInfo.html#DOC.1.4.18.2.9">gamma</A>=0) const </B></TT>
<DD>Renders the foreground layer of the DjVu image.  Rectangles <TT>rect</TT> and
<TT>all</TT> are used as explained above. Color correction is performed
according to argument <TT>gamma</TT>, which represents the gamma coefficient of
the display device on which the pixmap will be rendered.  The default
value, zero, means that no color correction should be performed.  This
function returns a null pointer if there is not enough information in
the DjVu image to properly render the desired image. 
<DL><DT><DD></DL><P></DL>
</DL>

<HR><DL><DT><B>This class has no child classes.</B></DL>

<DL><DT><DD></DL><P><P><I><A HREF="index.html">Alphabetic index</A></I> <I><A HREF="HIER.html">HTML hierarchy of classes</A> or <A HREF="HIERjava.html">Java</A></I></P><HR>
<!-- This is were the DOC++ footer is defined  -->
